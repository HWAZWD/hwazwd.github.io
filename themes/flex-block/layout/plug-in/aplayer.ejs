<% if (theme.aplayer.enable) { %>
  <!-- aplayer 音频 start -->
  <link rel="stylesheet" href="/assets/aplayer/aplayer.css">
  <script type="text/javascript" src="/assets/aplayer/aplayer.js"></script>
  <script type="text/javascript" src="/assets/pjax/jquery.js"></script>
  <script type="text/javascript" src="/assets/pjax/pjax.js"></script>
  <script type="text/javascript">
    $(document).pjax('a[target!=_blank]', '.root-container', { fragment: '.root-container', timeout: 10000 })
  </script>
  <script type="text/javascript">
    const aplayer = document.querySelectorAll(".aplayer-box");
    aplayer && initaplayer(aplayer);
    function initaplayer(els) {
      let elsArr = Array.from(els);
      elsArr.forEach(el => {
        let params = {
          container: el,
          audio: { ...el.dataset },
          theme: "<%= theme.aplayer.theme %>",
          autoplay: <%= theme.aplayer.autoplay %>,
          mutex: <%= theme.aplayer.mutex %>,
          mini: true,
          fixed: true,
          loop: 'all',
          volume: 1
        }
        console.log(params)
        if (el.dataset.lrc) {
          params['lrcType'] = <%= theme.aplayer.lrcType %>
        }
        new APlayer(params);
      });
    }
  </script>
  <!-- aplayer 音频 end -->
  <% } %>